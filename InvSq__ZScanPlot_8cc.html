<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SiPM Calibration Analyze Scripts: /github/workspace/InvSqCalc/bin/InvSq_ZScanPlot.cc File Reference</title>
<!-- Overriding the tabs css with our own -->
<!--link href="tabs.css" rel="stylesheet" type="text/css"/-->
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--Explicitly calling the including the stuff required for search-->
<!--<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
-->
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SiPM Calibration Analyze Scripts
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_36dc7b07e44aeb9e1496eef153f0296c.html">InvSqCalc</a></li><li class="navelem"><a class="el" href="dir_ac0d255873f8ddd5945d24e53aed9691.html">bin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Helper subroutines and functions</a>  </div>
  <div class="headertitle"><div class="title">InvSq_ZScanPlot.cc File Reference<div class="ingroups"><a class="el" href="group__InvSqCalc.html">InvSqCalc</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Command <code>SiPM_InvSq_ZScanPlot</code>: Running the inverse square fit a data file collected with z scan.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This function expects the a standard data format, collection via a zscan command with a singular power setting. The data columns are expected to represent the readout value and the uncertainty in the readout value (poisson uncertainty already reduced), this command then performs a inverse square fit to the data, and generates a plot displaying the full output. A summary of the fit results in text format is also displayed on the terminal for rapid debugging.</p>
<h3>List of command specific options:</h3>
<ul>
<li><code>--data, -d</code>: The path to the input data file.</li>
<li><code>--output, -o</code>: The path to store the output plot file (PDF).</li>
<li><code>--uncscale,　-u</code>:　Scale factor to apply to the uncertainty column, this is in place in case you which to run the fit without the Poisson uncertainty subtraction, or which to modify the uncertainty readout in any way.</li>
</ul>
<h3>Additional details:</h3>
<p >Notice that the plot generated doesn't place the data at the original coordinate position and the origian readout luminosity values. As for the perfect fit with an inverse square, the reader will typically expected that the fit result in the log-log plot is a straight line, which the human eye is very sensitive at picking up deviations from. For this reason, we shift the data to remove the effects of pedestal and z directional offset so that the data presented be a straight line. The removal of these effects are still explicitly spelt out in the axis labels. </p>

<p class="definition">Definition in file <a class="el" href="InvSq__ZScanPlot_8cc_source.html">InvSq_ZScanPlot.cc</a>.</p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Helper subroutines and functions</h2></td></tr>
<tr class="memitem:a7c1dbb0a9f36a3e33c30c87c77506b4c"><td class="memItemLeft" align="right" valign="top">TGraphErrors&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="InvSq__ZScanPlot_8cc.html#a7c1dbb0a9f36a3e33c30c87c77506b4c">MakeZScanGraph</a> (const <a class="el" href="classStdFormat.html">StdFormat</a> &amp;sformat, const double uncscale)</td></tr>
<tr class="memdesc:a7c1dbb0a9f36a3e33c30c87c77506b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Morphing the standard format into a ROOT TGraph container.  <a href="InvSq__ZScanPlot_8cc.html#a7c1dbb0a9f36a3e33c30c87c77506b4c">More...</a><br /></td></tr>
<tr class="separator:a7c1dbb0a9f36a3e33c30c87c77506b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab269d55db6599c6f8534a0e52f0af9ff"><td class="memItemLeft" align="right" valign="top">TFitResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="InvSq__ZScanPlot_8cc.html#ab269d55db6599c6f8534a0e52f0af9ff">FitAndShiftData</a> (TGraph &amp;data, TF1 &amp;func, double &amp;ped, double &amp;zoffset)</td></tr>
<tr class="memdesc:ab269d55db6599c6f8534a0e52f0af9ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fitting the data to the inverse square function and shift the data points in the data graph to remove pedestal and vertical offset effect.  <a href="InvSq__ZScanPlot_8cc.html#ab269d55db6599c6f8534a0e52f0af9ff">More...</a><br /></td></tr>
<tr class="separator:ab269d55db6599c6f8534a0e52f0af9ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="InvSq__ZScanPlot_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main routine for plotting inverse z scan. Go to the source file for detailed documentation.  <a href="InvSq__ZScanPlot_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab269d55db6599c6f8534a0e52f0af9ff" name="ab269d55db6599c6f8534a0e52f0af9ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab269d55db6599c6f8534a0e52f0af9ff">&#9670;&nbsp;</a></span>FitAndShiftData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TFitResult FitAndShiftData </td>
          <td>(</td>
          <td class="paramtype">TGraph &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TF1 &amp;&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>ped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>zoffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The fit will be performed a first time to determined the pedestal and vertical off set. Then, the data will be shifted according to the fitted pedestal and vertical positions. Here we also scale the luminosity normalization such that the fit uncertainty on the luminosity should be the same as the vertical offset uncertainty. The pedestal and vertical offset will be stored in the latter input inputs.</p>
<p >Once the data shifting is complete, we then perform the fit again such that the function parameters properly match the data. </p>

<p class="definition">Definition at line <a class="el" href="InvSq__ZScanPlot_8cc_source.html#l00192">192</a> of file <a class="el" href="InvSq__ZScanPlot_8cc_source.html">InvSq_ZScanPlot.cc</a>.</p>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627" name="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="InvSq__ZScanPlot_8cc_source.html#l00060">60</a> of file <a class="el" href="InvSq__ZScanPlot_8cc_source.html">InvSq_ZScanPlot.cc</a>.</p>

</div>
</div>
<a id="a7c1dbb0a9f36a3e33c30c87c77506b4c" name="a7c1dbb0a9f36a3e33c30c87c77506b4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c1dbb0a9f36a3e33c30c87c77506b4c">&#9670;&nbsp;</a></span>MakeZScanGraph()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TGraphErrors MakeZScanGraph </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classStdFormat.html">StdFormat</a> &amp;&#160;</td>
          <td class="paramname"><em>sformat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>uncscale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="InvSq__ZScanPlot_8cc_source.html#l00153">153</a> of file <a class="el" href="InvSq__ZScanPlot_8cc_source.html">InvSq_ZScanPlot.cc</a>.</p>

</div>
</div>

<p><a href="InvSq__ZScanPlot_8cc_source.html">Go to the source code of this file.</a></p>
<div class="textblock"><code>#include &quot;SiPMCalib/Common/interface/StdFormat.hpp&quot;</code><br />
<code>#include &quot;SiPMCalib/InvSqCalc/interface/InvSqFunc.hpp&quot;</code><br />
<code>#include &quot;UserUtils/Common/interface/ArgumentExtender.hpp&quot;</code><br />
<code>#include &quot;UserUtils/Common/interface/STLUtils/OStreamUtils.hpp&quot;</code><br />
<code>#include &quot;UserUtils/PlotUtils/interface/Ratio1DCanvas.hpp&quot;</code><br />
<code>#include &quot;UserUtils/PlotUtils/interface/Simple1DCanvas.hpp&quot;</code><br />
<code>#include &quot;TFitResult.h&quot;</code><br />
<code>#include &quot;TGraphErrors.h&quot;</code><br />
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/>
  <address class="footer">
    <small>
    Generated by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.9.2
    </small>
  </address>
  <address class="footer">
    <small>
    Source code hosted on<a href="http://github.com">GitHub</a>
    </small>
  </address>
  <address class="footer">
    <small id="debugger">
    Debug:
    </small>
  </address>
<!-- custom Javascript stuff -->
  <script type="text/javascript" src="customjs/summary.js"></script>
</body>
</html>
